<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Bowl Inspired Game</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        canvas {
            display: block;
            margin: 0 auto;
        }

        .game-ui {
            position: fixed;
            top: 10px;
            left: 10px;
            color: white;
            font-family: Arial, sans-serif;
            font-size: 20px;
            z-index: 100;
        }

        .game-over {
            color: red;
            font-size: 30px;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<div class="game-ui">
    <div id="score">Score: 0</div>
    <div id="level">Level: 1</div>
    <div id="game-over" class="game-over" style="display:none;">Game Over!</div>
</div>

<script>
// Game Initialization
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = 800;
canvas.height = 600;

// Load player images
const quarterbackImg = new Image();
quarterbackImg.src = 'https://example.com/quarterback_sprite.png'; // Replace with actual image URL

const receiverImg = new Image();
receiverImg.src = 'https://example.com/receiver_sprite.png'; // Replace with actual image URL

const defenderImg = new Image();
defenderImg.src = 'https://example.com/defender_sprite.png'; // Replace with actual image URL

const ballImg = new Image();
ballImg.src = 'https://example.com/football_sprite.png'; // Replace with actual image URL

// Game objects
let quarterback = {
    x: 100,
    y: 300,
    width: 30,
    height: 30,
    speed: 5,
    hasBall: true,
    route: [],
    routeIndex: 0,
};

let receiver = {
    x: 300,
    y: 100,
    width: 30,
    height: 30,
    speed: 4,
    route: [{x: 500, y: 150}, {x: 600, y: 400}], // Example route points for receiver
    routeIndex: 0,
};

let ball = {
    x: quarterback.x + 15,
    y: quarterback.y + 15,
    radius: 10,
    color: 'yellow',
    isThrown: false,
    targetX: 0,
    targetY: 0,
};

// Game variables
let score = 0;
let level = 1;
let gameOver = false;
let defender = {
    x: 200,
    y: 300,
    width: 30,
    height: 30,
    speed: 3,
};

// Update the game state
function updateGame() {
    if (gameOver) return;

    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw field (with updated design)
    drawField();

    // Move players
    movePlayerAlongRoute(quarterback);
    movePlayerAlongRoute(receiver);
    moveDefender();

    // Draw quarterback
    ctx.drawImage(quarterbackImg, quarterback.x, quarterback.y, quarterback.width, quarterback.height);

    // Draw receiver
    ctx.drawImage(receiverImg, receiver.x, receiver.y, receiver.width, receiver.height);

    // Draw defender
    ctx.drawImage(defenderImg, defender.x, defender.y, defender.width, defender.height);

    // Draw ball if thrown
    if (ball.isThrown) {
        ctx.drawImage(ballImg, ball.x - ball.radius, ball.y - ball.radius, ball.radius * 2, ball.radius * 2);
    }

    // Ball logic (move toward target)
    if (ball.isThrown) {
        let dx = ball.targetX - ball.x;
        let dy = ball.targetY - ball.y;
        let distance = Math.sqrt(dx * dx + dy * dy);

        if (distance > 1) {
            let speed = 10; // Speed of ball throw
            let angle = Math.atan2(dy, dx);
            ball.x += Math.cos(angle) * speed;
            ball.y += Math.sin(angle) * speed;
        } else {
            // Ball reaches target
            if (Math.abs(ball.targetX - receiver.x) < receiver.width / 2 &&
                Math.abs(ball.targetY - receiver.y) < receiver.height / 2) {
                console.log("Caught!");
                // Switch to controlling receiver after catch
                quarterback.hasBall = false;
                receiver.hasBall = true;
            }
        }
    }

    // Update score and level
    updateUI();

    // Game loop
    requestAnimationFrame(updateGame);
}

// Draw the field (with yard lines)
function drawField() {
    ctx.fillStyle = '#4caf50';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Draw yard lines
    ctx.strokeStyle = '#ffffff';
    ctx.lineWidth = 2;
    for (let i = 0; i < canvas.height; i += 50) {
        ctx.beginPath();
        ctx.moveTo(0, i);
        ctx.lineTo(canvas.width, i);
        ctx.stroke();
    }
}

// Move player along their route (based on route points)
function movePlayerAlongRoute(playerObj) {
    if (playerObj.route.length > 0) {
        let target = playerObj.route[playerObj.routeIndex];
        let dx = target.x - playerObj.x;
        let dy = target.y - playerObj.y;
        let distance = Math.sqrt(dx * dx + dy * dy);

        if (distance > 2) {
            let angle = Math.atan2(dy, dx);
            playerObj.x += Math.cos(angle) * playerObj.speed;
            playerObj.y += Math.sin(angle) * playerObj.speed;
        } else {
            playerObj.routeIndex++;
            if (playerObj.routeIndex >= playerObj.route.length) {
                playerObj.routeIndex = 0; // Reset to start of route
            }
        }
    }
}

// Move defender to challenge the quarterback
function moveDefender() {
    let dx = quarterback.x - defender.x;
    let dy = quarterback.y - defender.y;
    let distance = Math.sqrt(dx * dx + dy * dy);

    if (distance > 1) {
        let angle = Math.atan2(dy, dx);
        defender.x += Math.cos(angle) * defender.speed;
        defender.y += Math.sin(angle) * defender.speed;
    }
}

// Handle player input (movement and throwing)
function handlePlayerInput(e) {
    if (gameOver) return;

    // Throw the ball (triggered by spacebar)
    if (e.key === ' ' && quarterback.hasBall) {
        // Throw ball to receiver's current position
        ball.isThrown = true;
        ball.targetX = receiver.x + 15;
        ball.targetY = receiver.y + 15;
        console.log('Ball thrown to target');
    }
}

// Update the UI (score and level)
function updateUI() {
    document.getElementById('score').textContent = 'Score: ' + score;
    document.getElementById('level').textContent = 'Level: ' + level;
}

// Event listener for keyboard input
window.addEventListener('keydown', handlePlayerInput);

// Start the game
updateGame();

</script>

</body>
</html>
